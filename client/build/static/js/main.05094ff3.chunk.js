(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{158:function(e,t,a){e.exports=a(294)},192:function(e,t){},194:function(e,t){},205:function(e,t){},207:function(e,t){},232:function(e,t){},234:function(e,t){},235:function(e,t){},240:function(e,t){},242:function(e,t){},248:function(e,t){},250:function(e,t){},269:function(e,t){},281:function(e,t){},284:function(e,t){},291:function(e,t,a){},293:function(e,t,a){},294:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(39),o=a.n(r),c=a(155),u=a(312);var i=function(e){return l.a.createElement(u.a,{href:"/login",target:"_"},l.a.createElement("input",{type:"button",value:"Log in"}))},m=a(40),s=a(42),f=a(6),E=a(5),p=a(26),v=a.n(p),d=function(){return v.a.get("/api/jokes")},g=function(e){return v.a.get("/api/jokes/"+e)},b=function(e){return v.a.delete("/api/jokes/"+e)},h=function(e){return v.a.post("/api/jokes",e)},j=function(e){return v.a.post("/api/user",e)},k=function(e){return v.a.get("/api/user/"+e)},O=function(e,t){return v.a.put("/api/user/"+e,t)},y=a(184);var S=function(e){var t=Object(n.useState)(!1),a=Object(f.a)(t,2),r=a[0],o=a[1],c=Object(n.useState)({}),i=Object(f.a)(c,2),p=i[0],v=i[1];function d(e){var t=e.target,a=t.name,n=t.value;v(Object(s.a)(Object(s.a)({},p),{},Object(m.a)({},a,n)))}return l.a.createElement("div",null,r&&l.a.createElement(E.a,{to:"/login"}),l.a.createElement("form",null,l.a.createElement("div",{className:"newUserForm"},l.a.createElement("input",{onChange:d,value:e.value,name:"name",type:"text",className:"form-control",placeholder:"name",id:"name"}),l.a.createElement("input",{onChange:d,value:e.value,name:"email",type:"text",className:"form-control",placeholder:"email",id:"email"}),l.a.createElement("input",{onChange:d,value:e.value,name:"password",type:"text",className:"form-control",placeholder:"password",id:"password"})),l.a.createElement(u.a,{onClick:function(e){e.preventDefault(),setTimeout((function(){o(!0)}),500),console.log("Hi from over here we are entering user data"),console.log(p.password),y.genSalt(10,(function(e,t){y.hash(p.password,t,(function(e,t){console.log(t),j({name:p.name,email:p.email,password:t})}))}))},className:"btn btn-primary SaveNewUserBtn"},"SAVE")))};var w=function(){return l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},l.a.createElement("a",{className:"navbar-brand",href:"#"},"The Buffoonery"))};var N=function(){return l.a.createElement("footer",{className:"sticky footer mt-auto py-3",style:{textAlign:"center"}},l.a.createElement("div",null,l.a.createElement("span",null,"\xa9 2021 The Buffoonery")))};var x=function(e){var t=e.fluid,a=e.children;return l.a.createElement("div",{className:"container".concat(t?"-fluid":"")},a)};var J=function(e){var t=e.children;return l.a.createElement("div",null,t)};var I=function(){return l.a.createElement("div",null,l.a.createElement(w,null),l.a.createElement(J,null,l.a.createElement(i,null)),l.a.createElement(x,null,l.a.createElement(S,null)),l.a.createElement(N,null))};var C=function(e){return l.a.createElement(u.a,{href:"/newUser",target:"_"},l.a.createElement("input",{type:"button",value:"New User"}))},_=a(84),A=a.n(_),T=a(154),B=Object(n.createContext)(),D=B.Provider,H=function(e){var t=e.children,a=Object(E.g)(),r=localStorage.getItem("token"),o=localStorage.getItem("userInfo"),c=localStorage.getItem("expiresAt"),u=Object(n.useState)({token:r,expiresAt:c,userInfo:o?JSON.parse(o):{}}),i=Object(f.a)(u,2),m=i[0],s=i[1],p=function(e){var t=e.token,a=e.userInfo,n=e.expiresAt;localStorage.setItem("token",t),localStorage.setItem("userInfo",JSON.stringify(a)),localStorage.setItem("expiresAt",n),s({token:t,userInfo:a,expiresAt:n})};return l.a.createElement(D,{value:{authState:m,setAuthState:function(e){return p(e)},logout:function(){localStorage.removeItem("token"),localStorage.removeItem("userInfo"),localStorage.removeItem("expiresAt"),s({}),a.push("/signin")},isAuthenticated:function(){return!(!m.token||!m.expiresAt)&&(new Date).getTime()/1e3<m.expiresAt},isAdmin:function(){return"admin"===m.userInfo.role}}},t)};var P=function(e){var t=Object(n.useContext)(B),a=Object(n.useState)(),r=Object(f.a)(a,2),o=r[0],c=r[1],i=Object(n.useState)(),m=Object(f.a)(i,2),s=m[0],p=m[1],v=Object(n.useState)(!1),d=Object(f.a)(v,2),g=d[0],b=d[1],h=Object(n.useState)(""),j=Object(f.a)(h,2),k=j[0],O=j[1],y=Object(n.useState)(""),S=Object(f.a)(y,2),w=S[0],N=S[1],x=function(){var e=Object(T.a)(A.a.mark((function e(a){var n,l;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(a),"/api/auth",e.next=5,fetch("/api/auth",{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(a)});case 5:return n=e.sent,e.next=8,n.json();case 8:l=e.sent,t.setAuthState(l),c(l.message),p(null),setTimeout((function(){b(!0)}),700),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),p(e.t0.message),c(null);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",null,g&&l.a.createElement(E.a,{to:"/home"}),o&&l.a.createElement("h1",null,"success"),s&&l.a.createElement("h1",null,"Error: ",s," "),l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log({email:k,password:w}),x({email:k,password:w})}},l.a.createElement("div",{className:"loginForm"},l.a.createElement("input",{onChange:function(e){return O(e.target.value.trim())},value:e.value,name:"email",type:"text",className:"form-control",placeholder:"email",id:"email"}),l.a.createElement("input",{onChange:function(e){return N(e.target.value.trim())},value:e.value,name:"password",type:"text",className:"form-control",placeholder:"password",id:"password"})),l.a.createElement(u.a,{type:"submit",className:"btn btn-primary LogInBtn"},"Log in")),l.a.createElement("img",{src:"https://images.unsplash.com/photo-1615266895858-c243b139d5b9?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1498&q=80",class:"img-fluid",alt:"funny image of dog with banana"}))};var F=function(){return l.a.createElement("div",null,l.a.createElement(w,null),l.a.createElement(J,null,l.a.createElement(C,null)),l.a.createElement(x,null,l.a.createElement(P,null)),l.a.createElement(N,null))};var L=function(){return l.a.createElement(u.a,{href:"/newJoke",target:"_"},l.a.createElement("input",{type:"button",value:"New Joke"}))};var U=function(e){return l.a.createElement(u.a,{href:"/yourJokes",target:"_"},l.a.createElement("input",{type:"button",value:"Saved jokes"}))};var W=function(e){return l.a.createElement(u.a,{href:"/login",target:"_"},l.a.createElement("input",{type:"button",value:"Log out"}))};var z=function(e){return l.a.createElement(u.a,{href:"/OwnJokes",target:"_"},l.a.createElement("input",{type:"button",value:"your Jokes"}))},M=a(310),V=a(313),G=a(311);a(291);function q(e){var t=e.children;return l.a.createElement("div",{className:"list-overflow-container"},l.a.createElement("ul",{className:"list-group"},t))}var Y=Object(M.a)({root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}});function K(e){var t=localStorage.getItem("userInfo"),a=JSON.parse(t)[0]._id,r=Object(n.useState)([]),o=Object(f.a)(r,2),c=(o[0],o[1]);Object(n.useEffect)((function(){console.log("hi")}),[]);var i=Y();return console.log(e),l.a.createElement("div",null,e.jokes.map((function(e){return l.a.createElement(q,{key:e._id},l.a.createElement(V.a,{className:i.root,variant:"outlined"},l.a.createElement(G.a,{className:"cardContent"},l.a.createElement("div",null,l.a.createElement("div",{className:"jokeCard"},l.a.createElement("div",null,e.joketype),l.a.createElement("div",null,e.partOne),l.a.createElement("div",null,e.partTwo)))),l.a.createElement(u.a,{onClick:function(){return function(e){k(a).then((function(t){console.log(e),console.log(t.data),c(t.data[0].savedJokes),console.log(t.data[0].savedJokes);var n=t.data[0].savedJokes;console.log(n),function(){console.log(n),console.log(e);var t=n;t.push(e),console.log(t);for(var l={},r=0,o=t.length;r<o;r++)l[t[r]._id]=t[r];for(var c in t=new Array,l)t.push(l[c]);console.log(t),O(a,{savedJokes:t})}()})).catch((function(e){return console.log(e)}))}(e)},className:"btn btn-primary saveBtn"},"save")))})))}var Q=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){console.log("hi"),d().then((function(e){return r(e.data)})).catch((function(e){return console.log(e)}))}),[]),l.a.createElement("div",null,l.a.createElement(w,null),l.a.createElement(J,null,l.a.createElement(L,null),l.a.createElement(U,null),l.a.createElement(W,null),l.a.createElement(z,null)),l.a.createElement(x,null,l.a.createElement(K,{jokes:a})),l.a.createElement(N,null))};var R=function(e){return l.a.createElement(u.a,{href:"/Home",target:"_"},l.a.createElement("input",{type:"button",value:"Home"}))},X=Object(M.a)({root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}});function Z(e){var t=X(),a=Object(n.useState)([]),r=Object(f.a)(a,2),o=r[0],c=r[1];function i(){var e=localStorage.getItem("userInfo"),t=JSON.parse(e)[0]._id;console.log("also hi"),k(t).then((function(e){console.log(e.data),c(e.data[0].savedJokes)})).catch((function(e){return console.log(e)}))}return Object(n.useEffect)((function(){console.log("hi"),i()}),[]),l.a.createElement("div",null,o.map((function(e){return l.a.createElement(q,{key:e._id},l.a.createElement(V.a,{className:t.root,variant:"outlined"},l.a.createElement(G.a,{className:"cardContent"},l.a.createElement("div",null,l.a.createElement("div",{className:"jokeCard"},l.a.createElement("div",null,e.joketype),l.a.createElement("div",null,e.partOne),l.a.createElement("div",null,e.partTwo)))),l.a.createElement(u.a,{onClick:function(){return function(e){var t=localStorage.getItem("userInfo"),a=JSON.parse(t)[0]._id;k(a).then((function(t){console.log(e._id),console.log(t.data),c(t.data[0].savedJokes),console.log(t.data[0].savedJokes);var n=t.data[0].savedJokes;console.log(n),function(){console.log(n),console.log(e);var t=n.filter((function(t){return t._id!==e._id}));console.log(t),O(a,{savedJokes:t}),i()}()})).catch((function(e){return console.log(e)}))}(e)},className:"btn btn-primary DeleteBtn"},"Delete")))})))}var $=function(){return l.a.createElement("div",null,l.a.createElement(w,null),l.a.createElement(J,null,l.a.createElement(L,null),l.a.createElement(R,null),l.a.createElement(W,null),l.a.createElement(z,null)),l.a.createElement(x,null,l.a.createElement(Z,null)),l.a.createElement(N,null))};var ee=function(e){var t=Object(n.useState)(!1),a=Object(f.a)(t,2),r=a[0],o=a[1],c=Object(n.useState)({}),i=Object(f.a)(c,2),p=i[0],v=i[1];function d(e){var t=e.target,a=t.name,n=t.value;v(Object(s.a)(Object(s.a)({},p),{},Object(m.a)({},a,n)))}return l.a.createElement("div",null,r&&l.a.createElement(E.a,{to:"/home"}),l.a.createElement("form",null,l.a.createElement("div",{className:"newJokeForm"},l.a.createElement("input",{onChange:d,value:e.value,name:"joketype",type:"text",className:"form-control",placeholder:"Joke type",id:"joketype"}),l.a.createElement("input",{onChange:d,value:e.value,name:"partOne",type:"text",className:"form-control",placeholder:"Part 1",id:"PartOne"}),l.a.createElement("input",{onChange:d,value:e.value,name:"partTwo",type:"text",className:"form-control",placeholder:"Part 2",id:"PartTwo"})),l.a.createElement(u.a,{onClick:function(e){e.preventDefault();var t=localStorage.getItem("userInfo"),a=JSON.parse(t);console.log(a[0]._id),setTimeout((function(){o(!0)}),500),console.log("Hi from over here"),h({userID:a[0]._id,joketype:p.joketype,partOne:p.partOne,partTwo:p.partTwo}).catch((function(e){return console.log(e)}))},className:"btn btn-primary SaveNewJokeBtn"},"SAVE")))};var te=function(){return l.a.createElement("div",null,l.a.createElement(w,null),l.a.createElement(J,null,l.a.createElement(U,null),l.a.createElement(R,null),l.a.createElement(W,null),l.a.createElement(z,null)),l.a.createElement(x,null,l.a.createElement(ee,null)),l.a.createElement(N,null))},ae=Object(M.a)({root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}});function ne(e){var t=Object(E.g)(),a=ae();return console.log(e),l.a.createElement("div",null,e.jokes.map((function(e){return l.a.createElement(q,{key:e._id},l.a.createElement(V.a,{className:a.root,variant:"outlined"},l.a.createElement(G.a,{className:"cardContent"},l.a.createElement("div",null,l.a.createElement("div",{className:"jokeCard"},l.a.createElement("div",null,e.joketype),l.a.createElement("div",null,e.partOne),l.a.createElement("div",null,e.partTwo)))),l.a.createElement(u.a,{onClick:function(){return a=e._id,setTimeout((function(){t.go(0)}),500),console.log(a),void b(a).catch((function(e){return console.log(e)}));var a},className:"btn btn-primary DeleteBtn"},"Delete")))})))}var le=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){console.log("hi"),function(){var e=localStorage.getItem("userInfo"),t=JSON.parse(e)[0]._id;console.log("also hi"),g(t).then((function(e){return r(e.data)})).catch((function(e){return console.log(e)}))}()}),[]),l.a.createElement("div",null,l.a.createElement(w,null),l.a.createElement(J,null,l.a.createElement(L,null),l.a.createElement(R,null),l.a.createElement(W,null),l.a.createElement(U,null)),l.a.createElement(x,null,l.a.createElement(ne,{jokes:a})),l.a.createElement(N,null))},re=a(38),oe=["children"],ce=function(e){var t=e.children,a=Object(c.a)(e,oe),r=Object(n.useContext)(B);return l.a.createElement(E.b,Object.assign({},a,{render:function(){return r.isAuthenticated()?l.a.createElement("div",null,t):l.a.createElement(E.a,{to:"/"})}}))},ue=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(E.d,null,l.a.createElement(E.b,{exact:!0,path:"/"},l.a.createElement(F,null)),l.a.createElement(E.b,{exact:!0,path:"/login"},l.a.createElement(F,null)),l.a.createElement(E.b,{exact:!0,path:"/newUser"},l.a.createElement(I,null))))},ie=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(n.Suspense,{fallback:l.a.createElement("h1",null,"Loading...")},l.a.createElement(E.d,null,l.a.createElement(ce,{path:["/home","/yourJokes","/newJoke","/ownJokes"]},l.a.createElement(E.b,{exact:!0,path:["/","/home"]},l.a.createElement(Q,null)),l.a.createElement(E.b,{exact:!0,path:"/yourJokes"},l.a.createElement($,null)),l.a.createElement(E.b,{exact:!0,path:"/ownJokes"},l.a.createElement(le,null)),l.a.createElement(E.b,{exact:!0,path:"/newJoke"},l.a.createElement(te,null))),l.a.createElement(ue,null))))};var me=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(re.a,null,l.a.createElement(H,null,l.a.createElement(ie,null))))};a(292),a(293);o.a.render(l.a.createElement(me,null),document.getElementById("root"))}},[[158,1,2]]]);
//# sourceMappingURL=main.05094ff3.chunk.js.map