{"ast":null,"code":"'use strict'; // tar -u\n\nvar hlo = require('./high-level-opt.js');\n\nvar r = require('./replace.js'); // just call tar.r with the filter and mtimeCache\n\n\nmodule.exports = function (opt_, files, cb) {\n  var opt = hlo(opt_);\n  if (!opt.file) throw new TypeError('file is required');\n  if (opt.gzip) throw new TypeError('cannot append to compressed archives');\n  if (!files || !Array.isArray(files) || !files.length) throw new TypeError('no files or directories specified');\n  files = Array.from(files);\n  mtimeFilter(opt);\n  return r(opt, files, cb);\n};\n\nvar mtimeFilter = function mtimeFilter(opt) {\n  var filter = opt.filter;\n  if (!opt.mtimeCache) opt.mtimeCache = new Map();\n  opt.filter = filter ? function (path, stat) {\n    return filter(path, stat) && !(opt.mtimeCache.get(path) > stat.mtime);\n  } : function (path, stat) {\n    return !(opt.mtimeCache.get(path) > stat.mtime);\n  };\n};","map":{"version":3,"sources":["/Users/austenhughes/The-Baffoonery/node_modules/tar/lib/update.js"],"names":["hlo","require","r","module","exports","opt_","files","cb","opt","file","TypeError","gzip","Array","isArray","length","from","mtimeFilter","filter","mtimeCache","Map","path","stat","get","mtime"],"mappings":"AAAA,a,CAEA;;AAEA,IAAMA,GAAG,GAAGC,OAAO,CAAC,qBAAD,CAAnB;;AACA,IAAMC,CAAC,GAAGD,OAAO,CAAC,cAAD,CAAjB,C,CACA;;;AAEAE,MAAM,CAACC,OAAP,GAAiB,UAACC,IAAD,EAAOC,KAAP,EAAcC,EAAd,EAAqB;AACpC,MAAMC,GAAG,GAAGR,GAAG,CAACK,IAAD,CAAf;AAEA,MAAI,CAACG,GAAG,CAACC,IAAT,EACE,MAAM,IAAIC,SAAJ,CAAc,kBAAd,CAAN;AAEF,MAAIF,GAAG,CAACG,IAAR,EACE,MAAM,IAAID,SAAJ,CAAc,sCAAd,CAAN;AAEF,MAAI,CAACJ,KAAD,IAAU,CAACM,KAAK,CAACC,OAAN,CAAcP,KAAd,CAAX,IAAmC,CAACA,KAAK,CAACQ,MAA9C,EACE,MAAM,IAAIJ,SAAJ,CAAc,mCAAd,CAAN;AAEFJ,EAAAA,KAAK,GAAGM,KAAK,CAACG,IAAN,CAAWT,KAAX,CAAR;AAEAU,EAAAA,WAAW,CAACR,GAAD,CAAX;AACA,SAAON,CAAC,CAACM,GAAD,EAAMF,KAAN,EAAaC,EAAb,CAAR;AACD,CAhBD;;AAkBA,IAAMS,WAAW,GAAG,SAAdA,WAAc,CAAAR,GAAG,EAAI;AACzB,MAAMS,MAAM,GAAGT,GAAG,CAACS,MAAnB;AAEA,MAAI,CAACT,GAAG,CAACU,UAAT,EACEV,GAAG,CAACU,UAAJ,GAAiB,IAAIC,GAAJ,EAAjB;AAEFX,EAAAA,GAAG,CAACS,MAAJ,GAAaA,MAAM,GAAG,UAACG,IAAD,EAAOC,IAAP;AAAA,WACpBJ,MAAM,CAACG,IAAD,EAAOC,IAAP,CAAN,IAAsB,EAAEb,GAAG,CAACU,UAAJ,CAAeI,GAAf,CAAmBF,IAAnB,IAA2BC,IAAI,CAACE,KAAlC,CADF;AAAA,GAAH,GAEf,UAACH,IAAD,EAAOC,IAAP;AAAA,WAAgB,EAAEb,GAAG,CAACU,UAAJ,CAAeI,GAAf,CAAmBF,IAAnB,IAA2BC,IAAI,CAACE,KAAlC,CAAhB;AAAA,GAFJ;AAGD,CATD","sourcesContent":["'use strict'\n\n// tar -u\n\nconst hlo = require('./high-level-opt.js')\nconst r = require('./replace.js')\n// just call tar.r with the filter and mtimeCache\n\nmodule.exports = (opt_, files, cb) => {\n  const opt = hlo(opt_)\n\n  if (!opt.file)\n    throw new TypeError('file is required')\n\n  if (opt.gzip)\n    throw new TypeError('cannot append to compressed archives')\n\n  if (!files || !Array.isArray(files) || !files.length)\n    throw new TypeError('no files or directories specified')\n\n  files = Array.from(files)\n\n  mtimeFilter(opt)\n  return r(opt, files, cb)\n}\n\nconst mtimeFilter = opt => {\n  const filter = opt.filter\n\n  if (!opt.mtimeCache)\n    opt.mtimeCache = new Map()\n\n  opt.filter = filter ? (path, stat) =>\n    filter(path, stat) && !(opt.mtimeCache.get(path) > stat.mtime)\n    : (path, stat) => !(opt.mtimeCache.get(path) > stat.mtime)\n}\n"]},"metadata":{},"sourceType":"script"}